<!-----------=======================  END THONG TIN MESSEAGE ==========================    ----------->
<!-----------=======================   NOI DUNG TIN NHAN  ==========================    ----------->
<div class="content-messeage">
   <div class="d-flex justify-content-center">
      <div class="spinner-border text-primary spinner-border-sm" role="status" *ngIf="loading">
         <span class="sr-only">Loading...</span>
      </div>
   </div>
   <div 
         style="height: 90%" 
         #scrollframe infinite-scroll 
         [infiniteScrollDistance]="scrollDistance"
         [infiniteScrollUpDistance]="scrollUpDistance" 
         [infiniteScrollThrottle]="throttle" 
         (scrolledUp)="onUp()"
         [scrollWindow]="false" class="content">

      <div class="messages">
         <ul *ngFor="let messeage of responseLastMsg">
             <!--   Người gửi  -->
            <li class="replies" *ngIf="messeage.sender == UserId">
               <ngx-avatar [name]="userCurrentShareService.userName" size="34" alt="message-icon" data-toggle="dropdown"></ngx-avatar>
               <p class="left" *ngIf="messeage.type == 1"> {{ messeage.content.content }} </p>
               <!--  Ảnh -->
               <img (click)="watchImagePreview(messeage.content.file?.filePath)"  *ngIf="messeage.type == 2" [src]="messeage.content.file?.filePath"
                    class="img-preview" data-toggle="modal" data-target="#myModal" />
               <!-- File -->
               <a (click)="openFile(messeage.content.file.filePath)" *ngIf="messeage.type == 5" class="file">{{ messeage.content.content }}</a>
            </li>

            <!--   Người nhận -->
            <li class="sent" *ngIf="messeage.sender != UserId">
               <ngx-avatar [name]="userShareService.userName" size="34" alt="message-icon" data-toggle="dropdown"></ngx-avatar>
               <p class="right"  *ngIf="messeage.type == 1"> {{ messeage.content.content }} </p>
               <!-- Ảnh  -->
               <img (click)="watchImagePreview(messeage.content.file?.filePath)" *ngIf="messeage.type == 2" [src]="messeage.content.file?.filePath"
                   class="img-preview" data-toggle="modal" data-target="#myModal" />
               <!--  File -->
               <a (click)="openFile(messeage.content.file?.filePath)" *ngIf="messeage.type == 5" class="file">{{ messeage.content.content }}</a>
            </li>

         </ul>
      </div>
   </div>
   <!-- Modal -->
   <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
         <!-- Modal content-->
         <div class="modal-content center" role="document">
            <div class="modal-body">
               <img src="{{  imagePreview }}" alt="" class="modal-image">
            </div>
         </div>
      </div>
   </div>
   <!-- Modal -->
   <form (ngSubmit)="sendMesseage(sendForm)" #sendForm="ngForm" autocomplete="off">
      <div class="send-view">
         <label class="send">
            <img src="/assets/ICON/IconAppChat/10.svg" alt="send file">
            <input #fileInput type="file" (change)="processFile(fileInput)">
         </label>
         <label class="send">
            <img src="/assets/ICON/IconAppChat/9.svg" alt="send file">
            <input #imageInput type="file" accept="image/*" (change)="processImage(imageInput)" name="file">
         </label>
         <label class="send">
            <span class="buzz">
               <p>Buzz!</p>
            </span>
         </label>
         <div class="send input-message">
            <input type="text" class="form-control" name="message" id="input-message" ngModel
               placeholder="Nhập nội dung tin nhắn">
            <img src="/assets/ICON/IconAppChat/7.svg" alt="icon">
         </div>
      </div>
   </form>
</div>


<!-----------=======================   NOI DUNG TIN NHAN  ==========================    ----------->
<script>
   $(document).ready(function () {
      $('[data-toggle="tooltip"]').tooltip();
   });
</script>