<div class="contact-líst">
	<div class="contact-view">
		<!-- ========================== SEARCH ===============================-->
		<div class="search">
			<div class="inpt-search">
				<img src="../../../../assets/ICON/IconAppChat/11.svg" alt="search-icon">
				<input type="text" placeholder="Tìm kiếm cuộc trò chuyện" />
			</div>
			<div class="btn-add">
				<img src="../../../../assets/ICON/IconboxChat/23.svg" alt="add conversation">
			</div>
		</div>
		<!-- ========================== END SEARCH ===============================-->

		<!-- ========================== CONTACT LIST =============================-->
		<div id="contacts">
			<ul *ngIf="tabTranfer == 0">
				<li *ngFor="let conv of responseConvs" class="contact" routerLink="/chat/{{conv.id}}"
					(click)="onCickConversation(conv)" [ngClass]="getActive(conv)">
					<div class="meta">
						<div class="wrap">
							<span class="contact-status online"></span>
							<ng-container *ngFor="let participant of conv.participants">
								<ngx-avatar *ngIf="participant.userId != UserId" [name]="participant.name" size="40">
								</ngx-avatar>
							</ng-container>

							<div class="meta">
								<ng-container *ngFor="let participant of conv.participants">
									<p class="name" *ngIf="participant.userId != UserId">
										{{ participant.name }}
									</p>
								</ng-container>

								<p class="preview" [ngClass]="{'seen': conv.unreadCount == 0}"
									*ngIf="!conv.lastMessage.sender && conv.lastMessage.type == 1">
									Bạn: {{  conv.lastMessage.content.content }}
								</p>
								<p class="preview" [ngClass]="{'seen': conv.unreadCount == 0}"
									*ngIf="conv.lastMessage.sender && conv.lastMessage.type == 1">
									{{  conv.lastMessage.content.content }}
								</p>
								<p class="preview" [ngClass]="{'seen': conv.unreadCount == 0}"
									*ngIf="conv.lastMessage.sender && conv.lastMessage.type == 2">
									Bạn nhận được một ảnh
								</p>
								<p class="preview" [ngClass]="{'seen': conv.unreadCount == 0}"
									*ngIf="!conv.lastMessage.sender && conv.lastMessage.type == 2">
									Bạn đã gửi một ảnh
								</p>
								<!-- <p class="preview" [ngClass]="{'seen' : !chat.seenStatus, 'not-seen' : chat.seenStatus}">{{  chat.lastMesseage }}</p> -->
							</div>
							<div class="meta status">
								<p *ngIf="forMatTime(conv.lastMessage.createdAt) === 0" class="time">
									{{conv.lastMessage.createdAt | date: 'HH:MM'}}</p>
								<p *ngIf="forMatTime(conv.lastMessage.createdAt) === 1" class="time">
									{{conv.lastMessage.createdAt | date: 'EEE'}}</p>
								<p *ngIf="forMatTime(conv.lastMessage.createdAt) === 2" class="time">
									{{conv.lastMessage.createdAt | date: 'd MMM' }}
								</p>
								<span class="badge badge-light newMesseage"
									[ngClass]="{'not-amout': conv.unreadCount === 0}">
									{{ conv.unreadCount }}
								</span>
							</div>
						</div>
					</div>
				</li>
			</ul>

			<ul class="nav-pills nav-stacked" *ngIf="tabTranfer == 1">
				<li id="user-contact" *ngFor="let user of users" (click)="onCreateConversation(user)">
					<ngx-avatar [name]="user.userName" size="34"></ngx-avatar>
					<p class="name"> {{ user.userName }} </p>
				</li>
			</ul>
		</div>

		<!-- ========================== END CONTACT LIST =============================-->
		<!-- tab menu -->
		<div id="bottom-bar">
			<button (click)="getConversationsTab()"
				[ngClass]="{ 'bg': 'tabtranfer', 'tab-active': !tabChange}"><span>Cuộc
					trò chuyện</span></button>
			<button (click)="getContactListTab()" [ngClass]="{'bg': 'tabtranfer', 'tab-active': tabChange }"><span>Danh
					bạ</span></button>
		</div>
		<!-- tab menu -->
	</div>
</div>